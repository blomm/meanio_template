'use strict';

/**
 * Module dependencies.
 */
var mongoose = require('mongoose'),
  Schema = mongoose.Schema;

var OutbreakDataSchema = new Schema({
  idOriginal:{type: String},
  country:{type: String},
  province:{type: String},
  district:{type: String},
  subdistrict:{type: String},
  Shape: { type: Object, index: '2dsphere'},
  startdate:{
    type: Date
  },
  year:{type: String},
  month:{type: String},
  serotype:{type: String},
  specie1:{type: String},
  specie2:{type: String},
  atrisk1:{type: String},
  atrisk2:{type: String},
  atriskbuf:{type: String},
  atriskcow:{type: String},
  atriskpig:{type: String},
  artrisksmall:{type: String},
  case1:{type: String},
  case2:{type: String},
  case3:{type: String},
  casebuf:{type: String},
  casecow:{type: String},
  casepis:{type: String},
  casesmall:{type: String},
  die1:{type: String},
  die2:{type: String},
  die3:{type: String},
  diebuf:{type: String},
  diecow:{type: String},
  diepig:{type: String},
  diesmall:{type: String},
  destroy:{type: String},
  slaughter:{type: String},
  unknown:{type: String},
  intro:{type: String},
  illegal:{type: String},
  transit:{type: String},
  grazing:{type: String},
  swill:{type: String},
  fomites:{type: String},
  quarantine:{type: String},
  disinfection:{type: String},
  restrictmov:{type: String},
  vaccination:{type: String},
  zoning:{type: String},
  stampout:{type: String}

});

mongoose.model('OutbreakPoint', OutbreakDataSchema);

/*function populateOutbreakDataCollection(){
  SolarPoint.find({}).exec(function(err,collection){
    console.log("Number of points in solar table: "+ collection.length);
    if(collection.length===0){

      console.log("need to populate solar point data...");
      var BNGprojection = "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs";
      var theSolarPoints =["1,436776,1125709,1579","2,436776,1094709,1579","3,343776,1063709,1662","4,374776,1063709,1662","5,343776,1032709,1662","6,374776,1032709,1662","7,312776,1001709,1658","8,343776,1001709,1662","9,157776,970709,1513","10,219776,970709,1604","11,250776,970709,1621","12,281776,970709,1645","13,312776,970709,1659","14,343776,970709,1661","15,95776,939709,1513","16,126776,939709,1513","17,157776,939709,1517","18,219776,939709,1606","19,250776,939709,1591","20,281776,939709,1677","21,312776,939709,1681","22,95776,908709,1513","23,126776,908709,1513","24,188776,908709,1582","25,219776,908709,1635","26,250776,908709,1638","27,281776,908709,1679","28,312776,908709,1694","29,64776,877709,1513","30,95776,877709,1513","31,126776,877709,1513","32,188776,877709,1618","33,219776,877709,1656","34,250776,877709,1667","35,281776,877709,1709","36,312776,877709,1741","37,343776,877709,1753","38,374776,877709,1788","39,405776,877709,1806","40,95776,846709,1513","41,126776,846709,1513","42,157776,846709,1596","43,188776,846709,1627","44,219776,846709,1660","45,250776,846709,1676","46,281776,846709,1711","47,312776,846709,1746","48,343776,846709,1774","49,374776,846709,1803","50,405776,846709,1818","51,64776,815709,1948","52,126776,815709,1948","53,157776,815709,1749","54,188776,815709,1671","55,219776,815709,1667","56,250776,815709,1673","57,281776,815709,1705","58,312776,815709,1730","59,343776,815709,1799","60,374776,815709,1811","61,405776,815709,1812","62,64776,784709,1948","63,126776,784709,1905","64,157776,784709,1794","65,188776,784709,1717","66,219776,784709,1634","67,250776,784709,1642","68,281776,784709,1705","69,312776,784709,1760","70,343776,784709,1821","71,374776,784709,1865","72,95776,753709,1946","73,126776,753709,1921","74,157776,753709,1805","75,188776,753709,1775","76,219776,753709,1693","77,250776,753709,1677","78,281776,753709,1741","79,312776,753709,1791","80,343776,753709,1842","81,374776,753709,1875","82,126776,722709,1910","83,157776,722709,1803","84,188776,722709,1787","85,219776,722709,1758","86,250776,722709,1756","87,281776,722709,1758","88,312776,722709,1791","89,343776,722709,1874","90,126776,691709,1890","91,157776,691709,1834","92,188776,691709,1779","93,219776,691709,1774","94,250776,691709,1771","95,281776,691709,1778","96,312776,691709,1812","97,343776,691709,1847","98,126776,660709,1892","99,157776,660709,1842","100,188776,660709,1825","101,219776,660709,1797","102,250776,660709,1779","103,281776,660709,1804","104,312776,660709,1820","105,343776,660709,1852","106,374776,660709,1928","107,405776,660709,1938","108,126776,629709,1901","109,157776,629709,1880","110,188776,629709,1859","111,219776,629709,1871","112,250776,629709,1863","113,281776,629709,1815","114,312776,629709,1778","115,343776,629709,1822","116,374776,629709,1925","117,405776,629709,1933","118,64776,598709,1863","119,95776,598709,1893","120,126776,598709,1907","121,157776,598709,1901","122,219776,598709,1886","123,250776,598709,1867","124,281776,598709,1822","125,312776,598709,1703","126,343776,598709,1749","127,374776,598709,1847","128,405776,598709,1915","129,436776,598709,1943","130,64776,567709,1810","131,95776,567709,1865","132,126776,567709,1878","133,157776,567709,1882","134,188776,567709,1903","135,219776,567709,1933","136,250776,567709,1960","137,281776,567709,1954","138,312776,567709,1826","139,343776,567709,1813","140,374776,567709,1822","141,405776,567709,1786","142,436776,567709,1763","143,33776,536709,1782","144,64776,536709,1785","145,95776,536709,1825","146,126776,536709,1845","147,157776,536709,1857","148,219776,536709,1954","149,250776,536709,1990","150,281776,536709,1998","151,312776,536709,1915","152,343776,536709,1879","153,374776,536709,1846","154,405776,536709,1721","155,436776,536709,1671","156,467776,536709,1790","157,33776,505709,1776","158,64776,505709,1738","159,95776,505709,1793","160,126776,505709,1829","161,157776,505709,1857","162,250776,505709,2013","163,312776,505709,1919","164,343776,505709,1908","165,374776,505709,1886","166,405776,505709,1836","167,436776,505709,1865","168,467776,505709,1855","169,498776,505709,1877","170,33776,474709,1652","171,95776,474709,1748","172,126776,474709,1777","173,157776,474709,1845","174,219776,474709,2030","175,250776,474709,2013","176,312776,474709,1901","177,343776,474709,1871","178,374776,474709,1850","179,405776,474709,1861","180,436776,474709,1890","181,467776,474709,1897","182,498776,474709,1922","183,529776,474709,1945","184,343776,443709,1831","185,374776,443709,1814","186,405776,443709,1837","187,436776,443709,1889","188,467776,443709,1901","189,498776,443709,1966","190,529776,443709,1952","191,343776,412709,1832","192,374776,412709,1770","193,405776,412709,1784","194,436776,412709,1875","195,467776,412709,1898","196,498776,412709,1941","197,529776,412709,1960","198,219776,381709,2061","199,250776,381709,2050","200,281776,381709,2006","201,312776,381709,1909","202,343776,381709,1890","203,374776,381709,1840","204,405776,381709,1838","205,436776,381709,1868","206,467776,381709,1907","207,498776,381709,1939","208,529776,381709,1968","209,560776,381709,2025","210,219776,350709,2139","211,250776,350709,2051","212,281776,350709,1972","213,312776,350709,1920","214,343776,350709,1909","215,374776,350709,1874","216,405776,350709,1866","217,436776,350709,1875","218,467776,350709,1902","219,498776,350709,1948","220,529776,350709,2023","221,560776,350709,2055","222,591776,350709,2065","223,622776,350709,2075","224,219776,319709,2260","225,250776,319709,2028","226,281776,319709,1948","227,312776,319709,1931","228,343776,319709,1930","229,374776,319709,1902","230,405776,319709,1870","231,436776,319709,1921","232,467776,319709,1934","233,498776,319709,1998","234,529776,319709,2036","235,560776,319709,2056","236,591776,319709,2064","237,622776,319709,2093","238,250776,288709,1922","239,281776,288709,1925","240,312776,288709,1932","241,343776,288709,1949","242,374776,288709,1885","243,405776,288709,1845","244,436776,288709,1902","245,467776,288709,1964","246,498776,288709,2005","247,529776,288709,1981","248,560776,288709,2011","249,591776,288709,2064","250,622776,288709,2100","251,219776,257709,2048","252,250776,257709,1972","253,281776,257709,1956","254,312776,257709,1970","255,343776,257709,2027","256,374776,257709,1943","257,405776,257709,1882","258,436776,257709,1950","259,467776,257709,1986","260,498776,257709,2123","261,529776,257709,2025","262,560776,257709,2026","263,591776,257709,2102","264,622776,257709,2127","265,188776,226709,2020","266,219776,226709,2050","267,250776,226709,2003","268,281776,226709,2000","269,312776,226709,2006","270,343776,226709,1984","271,374776,226709,1976","272,405776,226709,2006","273,436776,226709,2012","274,467776,226709,1999","275,498776,226709,2026","276,529776,226709,2019","277,560776,226709,2033","278,591776,226709,2095","279,622776,226709,2120","280,188776,195709,2049","281,219776,195709,2049","282,250776,195709,2033","283,281776,195709,2061","284,312776,195709,2082","285,343776,195709,2033","286,374776,195709,2010","287,405776,195709,2020","288,436776,195709,2021","289,467776,195709,2035","290,498776,195709,2019","291,529776,195709,2021","292,560776,195709,2040","293,591776,195709,2069","294,281776,164709,2107","295,312776,164709,2124","296,343776,164709,2056","297,374776,164709,2045","298,405776,164709,2075","299,436776,164709,2064","300,467776,164709,2047","301,498776,164709,1979","302,529776,164709,2045","303,560776,164709,2037","304,591776,164709,2055","305,622776,164709,2163","306,219776,133709,1961","307,250776,133709,2080","308,281776,133709,2056","309,312776,133709,2060","310,343776,133709,2091","311,374776,133709,2097","312,405776,133709,2109","313,436776,133709,2092","314,467776,133709,2093","315,498776,133709,2076","316,529776,133709,2027","317,560776,133709,2089","318,591776,133709,2065","319,622776,133709,2115","320,219776,102709,1979","321,250776,102709,1912","322,281776,102709,1869","323,312776,102709,2038","324,343776,102709,2087","325,374776,102709,2116","326,405776,102709,2139","327,436776,102709,2099","328,467776,102709,2236","329,498776,102709,2136","330,529776,102709,2084","331,560776,102709,2107","332,591776,102709,2090","333,188776,71709,2079","334,219776,71709,2058","335,250776,71709,1943","336,281776,71709,1902","337,312776,71709,1991","338,374776,71709,2121","339,405776,71709,2141","340,436776,71709,2145","341,157776,40709,2216","342,188776,40709,2145","343,219776,40709,2053","344,250776,40709,2008","345,281776,40709,1964"];

      for(var i = 0; i < theSolarPoints.length; i++){

        var solarPointArray=theSolarPoints[i].split(',');

        var ll= proj4(BNGprojection,proj4.WGS84,proj4.toPoint([solarPointArray[1],solarPointArray[2]]));

        SolarPoint.create({POINTID:solarPointArray[0],Shape:{ type: "Point", coordinates: [ ll.x, ll.y ] },Solar_kwh2:solarPointArray[3]});
      }
    }
  })
};

exports.populateOutbreakDataCollection=populateOutbreakDataCollection;
 */
